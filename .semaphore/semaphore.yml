# -------------------------------------------------------------------
# Codehaus Cargo, copyright 2004-2011 Vincent Massol, 2012-2025 Ali Tokmen.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
# -------------------------------------------------------------------
version: v1.0
name: Codehaus Cargo Java build on Ubuntu
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2404
execution_time_limit:
  # Allow up to 5 to 6 Dependabot-triggered parallel branches
  hours: 18
fail_fast:
  cancel:
    when: 'true'
global_job_config:
  prologue:
    commands:
      - echo 'echo "127.0.0.1 codehaus-cargo-ci" >> /etc/hosts' | sudo bash
      - sudo hostname codehaus-cargo-ci
      - 'CARGO_BRANCH_ID="$(echo "$SEMAPHORE_JOB_NAME" | tr ''[:upper:]'' ''[:lower:]'' | tr '' .'' ''--'')"'
      - checkout
      - export ORIGINAL_PWD=$PWD
      - cd ~/
      - mkdir -p ~/.m2/repository
      - cd ~/.m2
      - cache list
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-repository" ; repository_size="`du -shb repository | cut -f1`" ; [ $repository_size -lt 1 ] ; break ; [ $repository_size -gt 400000000 ] && cache store "codehaus-cargo-cache-repository" repository --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - mkdir -p /tmp/cargo-build-binaries
      - cd /tmp/cargo-build-binaries
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-6" ; java_6_size="`du -shb jdk-6u45-linux-x64.bin | cut -f1`" ; [ $java_6_size -lt 1 ] ; break ; [ $java_6_size -gt 50000000 ] && cache store "codehaus-cargo-cache-java-6" jdk-6u45-linux-x64.bin --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-7" ; java_7_size="`du -shb jdk-7u80-linux-x64.tar.gz | cut -f1`" ; [ $java_7_size -lt 1 ] ; break ; [ $java_7_size -gt 100000000 ] && cache store "codehaus-cargo-cache-java-7" jdk-7u80-linux-x64.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-8" ; java_8_size="`du -shb jdk-8u202-linux-x64.tar.gz | cut -f1`" ; [ $java_8_size -lt 1 ] ; break ; [ $java_8_size -gt 150000000 ] && cache store "codehaus-cargo-cache-java-8" jdk-8u202-linux-x64.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-21" ; java_21_size="`du -shb openjdk-21_linux-x64_bin.tar.gz | cut -f1`" ; [ $java_21_size -lt 1 ] ; break ; [ $java_21_size -gt 50000000 ] && cache store "codehaus-cargo-cache-java-21" openjdk-21_linux-x64_bin.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-maven" ; maven_size="`du -shb apache-maven-3.6.3-bin.tar.gz | cut -f1`" ; [ $maven_size -lt 1 ] ; break ; [ $maven_size -gt 5000000 ] && cache store "codehaus-cargo-cache-maven" apache-maven-3.6.3-bin.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
      - cache list
      - 'find . -type f -name apache-maven-3.6.3-bin.tar.gz -size -5M -print -exec rm {} +'
      - 'wget -N --continue https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz ; RM=0'
      - tar -xvzf apache-maven-3.6.3-bin.tar.gz
      - mkdir -p $ORIGINAL_PWD/core/samples/java/installs
      - cd $ORIGINAL_PWD/core/samples/java
      - cache restore "codehaus-cargo-cache-containers-$CARGO_BRANCH_ID"
      - cd $ORIGINAL_PWD
      - export MAVEN_HOME=/tmp/cargo-build-binaries/apache-maven-3.6.3
      - export MAVEN_OPTS="-Xmx768m"
      - 'export PATH=$MAVEN_HOME/bin:$PATH'
  epilogue:
    always:
      commands:
        - cd $ORIGINAL_PWD
        - test -d /tmp/cargo-build-binaries/jdk1.6.0_45/ && export BRANCH_JAVA_HOME=/tmp/cargo-build-binaries/jdk1.6.0_45 || export BRANCH_JAVA_HOME=$JAVA_HOME
        - export BRANCH_TEST_ID=`$BRANCH_JAVA_HOME/bin/java -version 2>&1 | head -1 | cut -d'"' -f2 | sed '/^1\./s///' | cut -d'"' -f1`
        - 'if [[ "$SEMAPHORE_JOB_NAME" =~ ^.*(Branch.*) ]] ; then export SUBBRANCH_ID=${BASH_REMATCH[1]} ; export BRANCH_TEST_ID="$BRANCH_TEST_ID) ($SUBBRANCH_ID" ; fi ; RM=0'
        - find . -iname "TEST-*.xml" -type f | xargs --no-run-if-empty perl -i -pe "s/\QTest\" time=/Test (Java $BRANCH_TEST_ID)\" time=/g"
        - find . -iname "TEST-*.xml" -type f | xargs --no-run-if-empty test-results publish
        - zip -r "$SEMAPHORE_JOB_NAME logs.zip" . -i "*.log"
        - artifact push job "$SEMAPHORE_JOB_NAME logs.zip"
        - mvn clean -T 1C
        - cache list
        - cd $ORIGINAL_PWD/core/samples/java
        - rm -f installs/tomcat-9.*.zip
        - cache list
        - cache delete "codehaus-cargo-cache-containers-$CARGO_BRANCH_ID"
        # SemaphoreCI has limited cache size, do not store container specifics
        # - if ! find .m2/cargo-installs -maxdepth 0 -empty | read v ; then cache store "codehaus-cargo-cache-containers-$CARGO_BRANCH_ID" installs --cleanup-by ACCESS_TIME ; fi ; RM=0
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-repository" ; repository_size="`du -shb repository | cut -f1`" ; [ $repository_size -lt 1 ] ; break ; [ $repository_size -gt 400000000 ] && cache store "codehaus-cargo-cache-repository" repository --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - cd /tmp/cargo-build-binaries
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-6" ; java_6_size="`du -shb jdk-6u45-linux-x64.bin | cut -f1`" ; [ $java_6_size -lt 1 ] ; break ; [ $java_6_size -gt 50000000 ] && cache store "codehaus-cargo-cache-java-6" jdk-6u45-linux-x64.bin --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-7" ; java_7_size="`du -shb jdk-7u80-linux-x64.tar.gz | cut -f1`" ; [ $java_7_size -lt 1 ] ; break ; [ $java_7_size -gt 100000000 ] && cache store "codehaus-cargo-cache-java-7" jdk-7u80-linux-x64.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-8" ; java_8_size="`du -shb jdk-8u202-linux-x64.tar.gz | cut -f1`" ; [ $java_8_size -lt 1 ] ; break ; [ $java_8_size -gt 150000000 ] && cache store "codehaus-cargo-cache-java-8" jdk-8u202-linux-x64.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-java-21" ; java_21_size="`du -shb openjdk-21_linux-x64_bin.tar.gz | cut -f1`" ; [ $java_21_size -lt 1 ] ; break ; [ $java_21_size -gt 50000000 ] && cache store "codehaus-cargo-cache-java-21" openjdk-21_linux-x64_bin.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - for i in $(seq 1 50); do cache restore "codehaus-cargo-cache-maven" ; maven_size="`du -shb apache-maven-3.6.3-bin.tar.gz | cut -f1`" ; [ $maven_size -lt 1 ] ; break ; [ $maven_size -gt 5000000 ] && cache store "codehaus-cargo-cache-maven" apache-maven-3.6.3-bin.tar.gz --cleanup-by ACCESS_TIME && break ; sleep 5 ; done
        - cache list
blocks:
  - name: Perform initial build and aggregate Javadoc on Java 11
    dependencies: []
    task:
      jobs:
        - name: Perform initial build and aggregate Javadoc on Java 11
          commands:
            - rm -rf ~/.m2/repository/org/codehaus/cargo
            - sem-version java 11
            - mvn -version
            - cp ~/.m2/repository/org/apache/tomcat/tomcat/9.*/tomcat-*.zip core/samples/java/installs ; RM=0
            - mvn clean install -T 1C || mvn clean install -e --fail-at-end
            - 'mvn javadoc:aggregate -DdetectLinks=true -T 1C || mvn javadoc:aggregate -DdetectLinks=true -e'
  - name: Build on Java 8
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Build on Java 8
          commands:
            - cd /tmp/cargo-build-binaries
            - 'find . -type f -name jdk-8u202-linux-x64.tar.gz -size -150M -print -exec rm {} +'
            - 'wget -N --continue https://repo.huaweicloud.com/java/jdk/8u202-b08/jdk-8u202-linux-x64.tar.gz ; RM=0'
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - cd $ORIGINAL_PWD
            - mvn -version
            - cp ~/.m2/repository/org/apache/tomcat/tomcat/9.*/tomcat-*.zip core/samples/java/installs
            - mvn clean install -T 1C || mvn clean install -e --fail-at-end
  - name: Prepare for containers running on Java 6
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Prepare for containers running on Java 6
          commands:
            - cd /tmp/cargo-build-binaries
            - 'find . -type f -name jdk-6u45-linux-x64.bin -size -50M -print -exec rm {} +'
            - 'wget -N --continue https://repo.huaweicloud.com/java/jdk/6u45-b06/jdk-6u45-linux-x64.bin ; RM=0'
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
  - name: Prepare for containers running on Java 7
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Prepare for containers running on Java 7
          commands:
            - cd /tmp/cargo-build-binaries
            - 'find . -type f -name jdk-7u80-linux-x64.tar.gz -size -50M -print -exec rm {} +'
            - 'wget -N --continue https://repo.huaweicloud.com/java/jdk/7u80-b15/jdk-7u80-linux-x64.tar.gz ; RM=0'
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
  - name: Build on Java 17
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Build on Java 17
          commands:
            - sem-version java 17
            - cd $ORIGINAL_PWD
            - mvn -version
            - cp ~/.m2/repository/org/apache/tomcat/tomcat/9.*/tomcat-*.zip core/samples/java/installs
            - mvn clean install -T 1C || mvn clean install -e --fail-at-end
  - name: Build on Java 21
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Build on Java 21
          commands:
            - cd /tmp/cargo-build-binaries
            - 'find . -type f -name openjdk-21_linux-x64_bin.tar.gz -size -150M -print -exec rm {} +'
            - 'wget -N --continue https://download.java.net/java/GA/jdk21/fd2272bbf8e04c3dbaee13770090416c/35/GPL/openjdk-21_linux-x64_bin.tar.gz ; RM=0'
            - tar -xvzf openjdk-21_linux-x64_bin.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk-21
            - cd $ORIGINAL_PWD
            - mvn -version
            - cp ~/.m2/repository/org/apache/tomcat/tomcat/9.*/tomcat-*.zip core/samples/java/installs
            - mvn clean install -T 1C || mvn clean install -e --fail-at-end
  - name: Geronimo 1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Geronimo 1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pgeronimo1x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Geronimo 2.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Geronimo 2.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pgeronimo2x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Geronimo 3.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Geronimo 3.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pgeronimo3x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: GlassFish 3.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: GlassFish 3.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish3x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: GlassFish 3.x - Branch 3.0.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: GlassFish 3.x - Branch 3.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish3x-3.0 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 3.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 3.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss3x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 4.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss4x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 4.2.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 4.2.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss42x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 5.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss5x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 5.1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 5.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss51x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 6.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 6.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss6x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 6.1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 6.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss61x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 7.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 7.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss7x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JBoss 7.1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JBoss 7.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjboss71x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 5.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty5x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 6.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 6.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty6x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x - Branch 7.1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x - Branch 7.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x-7.1 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x - Branch 7.2.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x - Branch 7.2.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x-7.2 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x - Branch 7.3.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x - Branch 7.3.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x-7.3 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x - Branch 7.4.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x - Branch 7.4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x-7.4 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 7.x - Branch 7.5.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 7.x - Branch 7.5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty7x-7.5 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 8.x - Branch 8.0.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 8.x - Branch 8.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty8x-8.0 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 8.x - Branch 8.1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jetty 8.x - Branch 8.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty8x-8.1 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jo 1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Jo 1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjo1x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JOnAS 4.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JOnAS 4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjonas4x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: JOnAS 5.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: JOnAS 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjonas5x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Tomcat 4.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Tomcat 4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat4x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Tomcat 5.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Tomcat 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat5x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_4=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Tomcat 6.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Tomcat 6.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat6x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_5=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Tomcat 7.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: Tomcat 7.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat7x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: TomEE 1.x
    dependencies:
      - Prepare for containers running on Java 6
    task:
      jobs:
        - name: TomEE 1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - chmod +x jdk-6u45-linux-x64.bin
            - ./jdk-6u45-linux-x64.bin < <(echo y)
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee1x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_6=/tmp/cargo-build-binaries/jdk1.6.0_45
  - name: Jetty 8.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: Jetty 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty8x -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: Jetty 9.x - Branch 9.0.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: Jetty 9.x - Branch 9.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty9x-9.1 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: Jetty 9.x - Branch 9.1.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: Jetty 9.x - Branch 9.1.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty9x-9.1 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: Jetty 9.x - Branch 9.2.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: Jetty 9.x - Branch 9.2.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty9x-9.2 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: Payara - Branch 4.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: Payara - Branch 4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ppayara-4 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: TomEE 7.x - Branch 7.0.x
    dependencies:
      - Prepare for containers running on Java 7
    task:
      jobs:
        - name: TomEE 7.x - Branch 7.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - tar -xvzf jdk-7u80-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee7x-7.0 -Dsurefire.rerunFailingTestsCount=2 -Dcargo.java.home.1_7=/tmp/cargo-build-binaries/jdk1.7.0_80
  - name: GlassFish 4.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: GlassFish 4.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish4x -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 4.x - Branch 4.0.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: GlassFish 4.x - Branch 4.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish4x-4.0 -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 5.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: GlassFish 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish5x -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 5.x - Branch 5.0.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: GlassFish 5.x - Branch 5.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish5x-5.0 -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 6.x - Branch 6.0.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: GlassFish 6.x - Branch 6.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish6x-6.0 -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 9.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Jetty 9.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty9x -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 9.x - Branch 9.3.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Jetty 9.x - Branch 9.3.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty9x-9.3 -Dsurefire.rerunFailingTestsCount=2
  - name: Payara - Branch 5.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Payara - Branch 5.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ppayara-5 -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 8.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Tomcat 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat8x -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 8.x - Branch 8.0.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Tomcat 8.x - Branch 8.0.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat8x-8.0 -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 9.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: Tomcat 9.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat9x -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 7.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: TomEE 7.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee7x -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 8.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: TomEE 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee8x -Dsurefire.rerunFailingTestsCount=2
  - name: WebSphere Liberty
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WebSphere Liberty
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pliberty -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 8.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly8x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 8.x - Branch 8.1
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly8x-8.1 -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 9.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 9.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly9x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 10.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 10.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly10x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 11.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 11.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly11x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 12.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 12.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly12x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 13.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 13.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly13x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 14.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 14.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly14x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 15.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 15.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly15x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 16.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 16.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly16x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 17.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 17.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly17x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 18.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 18.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly18x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 19.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 19.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly19x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 20.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 20.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly20x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 21.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 21.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly21x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 22.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 22.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly22x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 23.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 23.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly23x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 24.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 24.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly24x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 25.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 25.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly25x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 26.x
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly 26.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly26x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly Swarm
    dependencies:
      - Build on Java 8
    task:
      jobs:
        - name: WildFly Swarm
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf jdk-8u202-linux-x64.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk1.8.0_202
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly-swarm2017x -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 6.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: GlassFish 6.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/extensions/maven3/samples/glassfish6x-remoteDeploy-test
            - mvn clean install -Pglassfish6x || mvn clean install -e -Pglassfish6x
            - cd $ORIGINAL_PWD/core/samples
            - cp ~/.m2/repository/org/glassfish/main/distributions/glassfish/6.*/glassfish-*.zip java/installs
            - mvn clean install -e -Pglassfish6x -Dsurefire.rerunFailingTestsCount=3
            - rm $ORIGINAL_PWD/core/samples/java/installs/glassfish-6.*.zip
  - name: GlassFish 6.x - Branch 6.1.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: GlassFish 6.x - Branch 6.1.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish6x-6.1 -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 7.x - Branch 7.0.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: GlassFish 7.x - Branch 7.0.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish7x-7.0 -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 10.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Jetty 10.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty10x -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 11.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Jetty 11.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty11x -Dsurefire.rerunFailingTestsCount=2
  - name: Payara - Branch 6.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Payara - Branch 6.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ppayara-6 -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 10.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Tomcat 10.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat10x -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 10.x - Branch 10.0.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: Tomcat 10.x - Branch 10.0.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat10x-10.0 -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 9.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: TomEE 9.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee9x -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 9.x - Branch 9.0.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: TomEE 9.x - Branch 9.0.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee9x-9.0 -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 27.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 27.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly27x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 28.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 28.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly28x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 29.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 29.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly29x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 30.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 30.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly30x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 31.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 31.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly31x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 32.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 32.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly32x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 33.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 33.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly33x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 34.x
    dependencies:
      - Perform initial build and aggregate Javadoc on Java 11
    task:
      jobs:
        - name: WildFly 34.x
          commands:
            - sem-version java 11
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly34x -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 7.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: GlassFish 7.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish7x -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 12.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: Jetty 12.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty12x -Dsurefire.rerunFailingTestsCount=2
  - name: Jetty 12.x - Branch 12.0.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: Jetty 12.x - Branch 12.0.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pjetty12x-12.0 -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 10.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: TomEE 10.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee10x -Dsurefire.rerunFailingTestsCount=2
  - name: TomEE 10.x - Branch 10.0.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: TomEE 10.x - Branch 10.0.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomee10x-10.x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 35.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: WildFly 35.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly35x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 36.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: WildFly 36.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly36x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 37.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: WildFly 37.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly37x -Dsurefire.rerunFailingTestsCount=2
  - name: WildFly 38.x
    dependencies:
      - Build on Java 17
    task:
      jobs:
        - name: WildFly 38.x
          commands:
            - sem-version java 17
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pwildfly38x -Dsurefire.rerunFailingTestsCount=2
  - name: GlassFish 8.x
    dependencies:
      - Build on Java 21
    task:
      jobs:
        - name: GlassFish 8.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf openjdk-21_linux-x64_bin.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk-21
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Pglassfish8x -Dsurefire.rerunFailingTestsCount=2
  - name: Payara
    dependencies:
      - Build on Java 21
    task:
      jobs:
        - name: Payara
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf openjdk-21_linux-x64_bin.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk-21
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ppayara -Dsurefire.rerunFailingTestsCount=2
  - name: Tomcat 11.x
    dependencies:
      - Build on Java 21
    task:
      jobs:
        - name: Tomcat 11.x
          commands:
            - cd /tmp/cargo-build-binaries
            - tar -xvzf openjdk-21_linux-x64_bin.tar.gz
            - export JAVA_HOME=/tmp/cargo-build-binaries/jdk-21
            - mvn -version
            - cd $ORIGINAL_PWD/core/samples
            - mvn clean install -e -Ptomcat11x -Dsurefire.rerunFailingTestsCount=2
  - name: Clean repository
    dependencies:
      - Geronimo 1.x
      - Geronimo 2.x
      - Geronimo 3.x
      - GlassFish 3.x
      - GlassFish 3.x - Branch 3.0.x
      - GlassFish 4.x
      - GlassFish 4.x - Branch 4.0.x
      - GlassFish 5.x
      - GlassFish 5.x - Branch 5.0.x
      - GlassFish 6.x
      - GlassFish 6.x - Branch 6.0.x
      - GlassFish 6.x - Branch 6.1.x
      - GlassFish 7.x
      - GlassFish 7.x - Branch 7.0.x
      - GlassFish 8.x
      - JBoss 3.x
      - JBoss 4.2.x
      - JBoss 4.x
      - JBoss 5.1.x
      - JBoss 5.x
      - JBoss 6.1.x
      - JBoss 6.x
      - JBoss 7.1.x
      - JBoss 7.x
      - Jetty 5.x
      - Jetty 6.x
      - Jetty 7.x
      - Jetty 7.x - Branch 7.1.x
      - Jetty 7.x - Branch 7.2.x
      - Jetty 7.x - Branch 7.3.x
      - Jetty 7.x - Branch 7.4.x
      - Jetty 7.x - Branch 7.5.x
      - Jetty 8.x
      - Jetty 8.x - Branch 8.0.x
      - Jetty 8.x - Branch 8.1.x
      - Jetty 9.x
      - Jetty 9.x - Branch 9.0.x
      - Jetty 9.x - Branch 9.1.x
      - Jetty 9.x - Branch 9.2.x
      - Jetty 9.x - Branch 9.3.x
      - Jetty 10.x
      - Jetty 11.x
      - Jetty 12.x
      - Jetty 12.x - Branch 12.0.x
      - Jo 1.x
      - JOnAS 4.x
      - JOnAS 5.x
      - Payara
      - Payara - Branch 4.x
      - Payara - Branch 5.x
      - Payara - Branch 6.x
      - Tomcat 4.x
      - Tomcat 5.x
      - Tomcat 6.x
      - Tomcat 7.x
      - Tomcat 8.x
      - Tomcat 8.x - Branch 8.0.x
      - Tomcat 9.x
      - Tomcat 10.x
      - Tomcat 10.x - Branch 10.0.x
      - Tomcat 11.x
      - TomEE 1.x
      - TomEE 7.x
      - TomEE 7.x - Branch 7.0.x
      - TomEE 8.x
      - TomEE 9.x
      - TomEE 9.x - Branch 9.0.x
      - TomEE 10.x
      - TomEE 10.x - Branch 10.0.x
      - WebSphere Liberty
      - WildFly 8.x
      - WildFly 8.x - Branch 8.1
      - WildFly 9.x
      - WildFly 10.x
      - WildFly 11.x
      - WildFly 12.x
      - WildFly 13.x
      - WildFly 14.x
      - WildFly 15.x
      - WildFly 16.x
      - WildFly 17.x
      - WildFly 18.x
      - WildFly 19.x
      - WildFly 20.x
      - WildFly 21.x
      - WildFly 22.x
      - WildFly 23.x
      - WildFly 24.x
      - WildFly 25.x
      - WildFly 26.x
      - WildFly 27.x
      - WildFly 28.x
      - WildFly 29.x
      - WildFly 30.x
      - WildFly 31.x
      - WildFly 32.x
      - WildFly 33.x
      - WildFly 34.x
      - WildFly 35.x
      - WildFly 36.x
      - WildFly 37.x
      - WildFly 38.x
      - WildFly Swarm
    task:
      jobs:
        - name: Clean repository
          commands:
            - cd ~/.m2
            - 'wget https://raw.githubusercontent.com/alitokmen/maven-repository-cleaner/main/maven-repository-cleaner.sh'
            - chmod +x maven-repository-cleaner.sh
            - ./maven-repository-cleaner.sh
            - cache delete "codehaus-cargo-cache-repository"
            - cache store "codehaus-cargo-cache-repository" repository --cleanup-by ACCESS_TIME
            - cache list
after_pipeline:
  task:
    jobs:
      - name: Publish test report
        commands:
          - test-results gen-pipeline-report
